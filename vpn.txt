VPN又称虚拟私有网(Virtual Private Network)，它利用网络安全技术和加密技术，在Internet公用网络（电信、网通的骨干网络）中建立一个安全的连接，数据只有通讯双方才能够获得，两端的网络和客户端如同处在同一个局域网一样。简单来说，我们把公用网络比做一条城市主干公路，把数据比做车辆，通常任何车辆都可以在这条公路上自由通行，但是当VPN发挥作用的时候，VPN就在主干公路上开辟一条临时专用道，只有VPN允许的车辆才能够顺利通行。由此可见，VPN能将两个相对独立的局域网联合起来，通过它可以帮助远程用户、公司分支机构、商业伙伴及供应商同公司的内部网建立可信的安全连接，并保证数据的安全传输，可以替代昂贵的DDN数字数据网（Digital Data Network）。


  VPN技术经过多年的发展，已经相当成熟，逐渐克服了操作复杂、价格昂贵的弊端。如今有不少网络设备生产商将VPN技术融合到主流无线路由器中，用户无需花费太多，就可以轻松创建网络安全通道。 

  固定VPN连接―中小企业VPN经


   阿良是一间化妆品销售公司的老板，他的公司需要向各大商场的化妆品专柜提供配送服务。可是由于成本的关系，公司的总部和库房相隔较远，使其产品的库存数量与财务帐目只能通过电话、传真或者邮件等方式进行传送，这让阿良不能及时掌握最新信息，做出正确的产品调配，往往造成旺季货源不足，淡季货源积压。由于公司规模较小，所用的网络设备多为SOHO级，使用了一条2MB电信ADSL线路，一个无线路由器，库房也是同样的网络配置。那么如何使用无线路由器的VPN功能来帮助阿良的业务呢？

  1.设置动态域名


  对ADSL稍有了解的朋友都知道，ADSL采用的是动态IP分配技术，在拨号后会得到一个随机的公网IP地址，每次得到的IP地址都不一样。所以我们首先要用DDNS（Dynamic Domain Name Server，动态域名服务器）来得到一个固定的域名，不管IP地址如何变动，都可以通过该域名来访问。


  现在提供DDNS的网站较多，笔者采用的是“希网”的DDNS服务，另外还有“花生壳”、“meibu”等可以选择。先在“www.3322.org”上注册一个“希网”动态域名（图1）。然后在浏览器中输入无线路由器的局域网IP地址（如“192.168.1.1”，请查阅无线路由器的说明书），进入Web管理界面（图2）。在“设置”、“DDNS（动态DNS）”界面中，填入在希网注册的“用户名”、“密码”和“主机名”（图3），输入完毕后保存设置。然后检查DDNS状态，可以看到希网动态域名已经启用，并作用于无线路由器的公网IP上（图4）。如果无线路由器没有DDNS功能也不要紧，使用希网的DDNS软件（图5），选择“随windows系统一起启动”，同样可以实现动态域名。

  2.设置VPN

  接下来设置总部的VPN服务器，在无线路由器的Web管理界面中，在“管理”、“服务”界面下找到“PPTP服务器”选项，选择“启用”PPTP服务。然后在“服务器IP地址”填入无线路由器的内网地址，“客户端IP地址”是设定外网电脑通过VPN进入后获取的内网IP地址范围，“CHAP-Secrets”是设置登陆用户名和密码，完毕后保存（图6）。

  然后为库房的无线路由器设置VPN客户端。在Web管理界面的“管理”、“服务”界面下找到“PPTP客户端”；选择“启用”PPTP客户端，在“服务器IP或DNS名称”中输入动态域名（这里是“xiao163.3322.org”），“远程子网”写“255.255.0.0”，“远程子网掩码”写“255.255.255.0”，在“MPPE加密”选项中输入“mppe requirld”启用加密功能，然后“启用”NAT，填入正确的用户名和密码并保存即可（图7）。在VPN建立好以后，库房的所有电脑均可获得总部局域网所分配的IP地址，可以通过“网上邻居”查看总部局域网的内部资料并共享资源了。

  注：不同的无线路由器的VPN功能项目名称可能不一致，请参阅说明书。

  临时VPN连接―个人远程办公

  小周是一位技术工程师，经常到不同地点为客户服务。以前因为要处理派遣单和维修回执单，必须在客户和公司之间来回跑，非常浪费时间。其实只要在公司建立VPN服务器，小周在任何地方都可以建立临时的VPN连接，下载派遣单和上传维修回执单即可。关于如何在无线路由器上面建立VPN服务器的具体操作步骤，已经在上文讲述，下面让我们来看看如何在电脑上建立临时的VPN客户端。


  在Windows XP/2003操作系统下，点击“开始”、“控制面板”、“网络连接”，点击左上角的“建立一个新的连接”（图10），接下来选择“连接到我的工作场所的网络”（图11）、“虚拟专用网络连接”（图12），为该连接命名（图13），在下一步选择“不拨初始连接”（图14），然后输入VPN服务器的动态域名（图15），就建立了VPN连接的快捷方式。最后打开该快捷方式，输入登陆VPN服务器的用户名和密码（图16），就可以接入公司的VPN通道了。

  最后


  第一种方法是两个无线路由器之间的固定VPN连接，后一种方法是电脑到无线路由器的临时VPN连接，我们可以根据实际需要来选择建立哪一种VPN连接。


  客观来说，由于成本的关系，具有VPN功能的无线路由器在硬件性能上并不强大，它所能支持的VPN连接数只有10个左右甚至更低，超出该限制后，轻则网络速度下降，重则导致频繁死机。因此对于普通用户和小型办公场所来说，本身对VPN的需求不高，完全可以善加利用无线路由器的VPN功能（部分无线路由器可以刷写DD-RWT固件，就具有了VPN功能）。而对于规模较大的公司来说，最好还是购买专用的VPN路由器，这样才能保证数据传输的安全和稳